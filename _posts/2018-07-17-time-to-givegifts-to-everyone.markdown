---
layout: post
title:  Loan Data Analysis
date:   2018-07-17 15:01:35 +0300
image:  04.jpeg
tags:   
---
This data relates to loans. Most often, a loan is necessary for our survival. The more personal information we collect, the more we take into account each person’s credit condition. To reduce risk, it is crucial for banks and the entire nation. People obtain this kind of data because of that. This report’s goal is to gain insight through data analysis, with a particular emphasis on data visualisation and correlation analysis.

The project will be consist of 5 parts:
* Data Overview
* Data Analysis
* Partial Data Analysis
* Conclusion
* Addtional Analysis


## Data Overview
1. Data preparation
   I obtained this dataset from Kaggle. <a href="https://www.kaggle.com/datasets/tanishaj225/loancsv/code?datasetId=1198164">here</a>
2. Data Description
<p align="center"><img src="{{ site.baseurl }}/images/25.png" width="100%" height="50%"></p>
Since each of the 614 Loan ID has a unique value, Loan ID is a key column. The target variable is Loan Status. Each column has a few tiny nan values. I preprocessed nan value data to allow for more precise data analysis. I’ll go into detail in the section after this.


## Data Analysis
1. Data preprocessing
   
   1.1 Null value preprocessing
   
   At first, I plotted histograms about the count of Loan Status by each categorical vari- able. Since each column contains a small number of null values, I replaced null values with the values which are the most frequent. (For instance, Gender = ’Male’, Married = ’Yes’ etc) I switched out null values for mean values when dealing with continuous variables. (For instance, LoanAmount = mean(LoanAmount))
   
   1.2 Data type preprocessing
   
   Since these are not continuous, I changed the types of Loan Amount Term, and Credit History from float to string.
   
   1.3 Derived variables
   
   Several derived variables, including Income, Ratio Loan, trans loan Status, Binned IC, and Binned LA, were generated by me. In the part after this, I shall describe these derived variables.
   
2. Correlation Analysis
   
   2.1 Correlation Analysis between continuous and continuous

   As a result of correlation analysis, ApplicantIncome and CoapplicantIncome are strongly correlated with LoanAmount as shown in Figure 1 below. As a result, I created a derived variable that equals the sum of ApplicantIncome and CoapplicantIncome. (In- come = ApplicantIncome + CoapplicantIncome) Commonsensically, the less ratio of the Loan amount people have, the better Loan Status they have. I consequently develop a new derived variable Ratio Loan. (Ratio Loan = LoanAmount / Income) Interest- ingly, as shown in Figure 1 below, there is no relationship between Ratio Loan and Loan Status. I conducted correlation analysis once more with the newly created vari- ables. Therefore, there is a significant relationship between Income and LoanAmount.
<p align="center"><img src="{{ site.baseurl }}/images/26.png" width="100%" height="50%"></p>
   2.2 Correlation Analysis between categorical and categorical

   I tried to use chi-square analysis to determine which factors were most pertinent to the target variable (loan Status). At a confidence level of 0.05, chi-square analysis re- vealed the Credit History and Loan Status to have the strongest link. At a confidence level of 0.05, there is a significant link between Property Area and Loan Status as well.
<p align="center"><img src="{{ site.baseurl }}/images/27.png" width="100%" height="50%"></p>
<p align="center"><img src="{{ site.baseurl }}/images/28.png" width="100%" height="50%"></p>
From the graphs above, I found out that there is a strong correlation between Credit History and Loan Status, especially in the Semiurban area.

   2.3 Correlation Analysis between continuous and categorical

I had to convert the target variable (Loan Status) from a categorical data type to a continuous data type to conduct a correlation analysis between continuous and cate- gorical variables. Therefore, I made a new variable trans loan Status with the values 0 (for ”N”) and 1 (for ”Y”). I then used stats.pointbiserialr to calculate the corre- lation coefficient between continuous and categorical data. Unexpectedly, as seen in the Figure 3 below, there is no correlation between continuous variables and the trans
loan Status.
<p align="center"><img src="{{ site.baseurl }}/images/29.png" width="100%" height="50%"></p>


## Partial Data Analysis
   
   1. Semiurban Data (Property Area=’Semiurban’)

   I discovered a significant association between Property Area and Loan Status as a con- sequence of correlation analysis (see figure (b) heatmap above). Particularly, compared to other areas, the Semiurban data has a stronger agreement. I then conducted a more focused analysis of Semiurban data.

      1.1 Credit History in SemiUrban

Only Semiurban data were used in my correlation analysis. As anticipated, Loan Status and Credit History have the best correlation. We can see the ratio of Loan Status by Credit History below.
<p align="center"><img src="{{ site.baseurl }}/images/30.png" width="100%" height="50%"></p>
There are quite a few proportions that (Loan Status=’N’ and Credit History=’1.0’) or (Loan Status=’Y’ and Credit History=’0.0’). It’s interesting to note that the associ- ation between Credit History and Loan Status does not apply to other characteristics of these data.

      1.2 Other variables in SemiUrban

I looked into more elements that might affect loan status. I performed a correlation analysis with a single focus on the conditions (Loan Status=’N’ and Credit History=’1.0’) or (Loan Status=’Y’ and Credit History=’0.0’). LoanAmount and Income only have a minimal association, I discovered. As a result, I tried to visualise the data distribution in Figures 4 and 5 below.
<p align="center"><img src="{{ site.baseurl }}/images/31.png" width="100%" height="50%"></p>
<p align="center"><img src="{{ site.baseurl }}/images/32.png" width="100%" height="50%"></p>
The data that is unaffected by Credit History is related to LoanAmount and Income, according to the boxplots above. According to these data, Loan Status=’Y’ is more likely the more the LoanAmount and the greater the Income. To apply it to these data, I first calculated the base measure (which is *upper inner fence) regarding each variable. (* upper inner fence = Q3 + 1.5IQR in each variable (LoanAmount, Income)) Consequently, the data beyond the base measure is most likely to decide their Loan Status unexpectedly. (e.g.) If the data which is Credit History=’Y’ and under the base measure of Income, they tend to go Loan Status=’0.0’. It means Income affects the decision that Loan Status=’0.0’ although Credit History is ’Y’.

   2. Urban Data (Property Area=’Urban’)

   I attempted to use Urban data with the same reasoning as above. As would be pre- dicted, there is a significant association between Loan Status and Credit History. In- terestingly, I discovered that Ratio Loan and CoapplicantIncome have a negative agree- ment with Loan Status. To find out how these two factors impact the data of (Credit
History=’Y’ and Loan Status=’0.0’) or (Credit History=’N’ and Loan Status=’1.0’), I looked into their effects. I had anticipated that these two variables would have an impact on the target variable, but neither the data for (Credit History=’Y’ and Loan Status=’0.0’) nor (Credit History=’N’ and Loan Status=’1.0’) show any associ- ation.

   3. Rural Data (Property Area=’Rural’)

   I attempted to apply the aforementioned concept to Rural data. As would be predicted, there is a significant association between Loan Status and Credit History. The goal value and other variables, however, do not correlate.


## Conclusion
   In all three sets of data, there is a significant link between Credit History and Loan Status. It’s interesting to note that Propery Area indicates a small discrepancy in traits. LoanAmount and Income show a significant association with Loan Status in Semiur- ban data. CoapplicantIncome and Loan Status, as well as Ratio Loan and Loan Status, have a negative association in Urban data. Last but not least, the only characteris- tic that correlates with Loan Status in Rural data is Credit History. Therefore, we shouldn’t assume that all data generally exhibit the same characteristics. Before mod- elling, we must train the data individually according to Property Area to boost the model’s accuracy.


## Addtional Analysis
Since there is a significant correlation between LoanAmount and Income, I reasoned that I might be able to estimate LoanAmount from Income using this data. I discovered that people have greater income as seen in Figure 6 below when they have a larger loan amount.
<p align="center"><img src="{{ site.baseurl }}/images/33.png" width="100%" height="50%"></p>
I eliminated outliers and assessed the degree of fit between the old and new data. I evenly divided the data into six bins based on LoanAmount. I then eliminated outliers according to Income. For instance, I eliminated the data under the lower outer fence and over the upper outer fence of each bin. (*lower outer fence = Q1 - 3*IQR, *upper outer fence = Q3 + 3*IQR) The revised data fit significantly better than the old data when outliers were eliminated, as shown in Figure 7 below.
<p align="center"><img src="{{ site.baseurl }}/images/34.png" width="100%" height="50%"></p>
